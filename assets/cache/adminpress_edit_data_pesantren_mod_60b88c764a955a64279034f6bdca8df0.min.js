
$(document).ready(function(){var table=$('#data_pesantren').DataTable({buttons:['copy','csv','excel','pdf','print'],ajax:url+'listener_show_all',processing:true,columns:[{sName:"id"},{sName:"nama"},{sName:"ket"},{sName:"aksi"}],columnDefs:[{targets:[0],visible:false},],});$('#form_tambah').on('submit',function(e){e.preventDefault();$.ajax({type:'post',url:url+'save',data:$('#form_tambah').serialize(),dataType:'json',beforeSend:function(){$("#loading").show();},success:function(dt){noty({text:dt.msg,layout:'topCenter',type:dt.status});if(dt.status=='error'){return false;}},error:function(request,status,error){alert(request.statusText);},beforeSend:function(){$("#loading").hide();},});});$(document).on('click','.new',function(){$('#form_data_pesantren').trigger("reset");$('#modal_data_pesantren .modal-title').html('Tambah Baru');$('#modal_data_pesantren .modal-footer button').html('Tambah');$('#modal_data_pesantren').modal('show');})
$(document).on('click','.edit',function(){var id_data_pesantren=$(this).data('id');var token=$('input[name="ci_csrf_token"]').val();$.ajax({type:'post',url:url+'get_data_pesantren',data:{id:id_data_pesantren},dataType:'json',success:function(dt){$('#modal_data_pesantren').modal('show');$('#modal_data_pesantren .modal-title').html('Edit '+dt.nama);$('#modal_data_pesantren input[name="id"]').val(dt.id);$('#modal_data_pesantren input[name="nama"]').val(dt.nama);$('#modal_data_pesantren textarea[name="ket"]').val(dt.ket);$('#modal_data_pesantren .modal-footer button').html('Perbarui');}});})
$('#form_data_pesantren').on('submit',function(e){e.preventDefault();$.ajax({type:'post',url:url+'save',data:$('#form_data_pesantren').serialize(),dataType:'json',success:function(dt){noty({text:dt.msg,layout:'topCenter',type:dt.status});$("#modal_data_pesantren").modal("hide");table.ajax.reload();$('#form_data_pesantren').trigger("reset");}});});var edit=$('#form_edit')({ordering:false,ajax:url+'listener_show_edit/'+$('#id').val(),});$(document).on('click','.edit',function(){var id_pesantren=$(this).data('id');var token=$('input[name="ci_csrf_token"]').val();$.ajax({type:'post',url:url+'get_data_pesantren',data:{id:id_pesantren},dataType:'json',success:function(dt){$('#modal_pesantren').modal('show');$('#modal_pesantren input[name="id"]').val(dt.id);$('#modal_pesantren input[name="nama"]').val(dt.nama);$('#modal_pesantren input[name="foto"]').val(dt.foto);$('#modal_pesantren textarea[name="deskripsi"]').val(dt.deskripsi);$('#modal_pesantren textarea[name="alamat"]').val(dt.alamat);}});})
$(document).on('click','.delete',function(){var id_data_pesantren=$(this).data('id');$('#id_delete').val(id_data_pesantren)
$('#modal_confirm').modal('show');})
$(document).on('click','#confirm_delete',function(){var id_data_pesantren=$('#id_delete').val();$.ajax({type:'post',url:url+'delete',data:{id:id_data_pesantren},dataType:'json',success:function(dt){$('#data_pesantren').DataTable().ajax.reload()}});})})
$(document).ready(function(){$('#myTable').DataTable();$(document).ready(function(){var table=$('#example').DataTable({"columnDefs":[{"visible":false,"targets":2}],"order":[[2,'asc']],"displayLength":25,"drawCallback":function(settings){var api=this.api();var rows=api.rows({page:'current'}).nodes();var last=null;api.column(2,{page:'current'}).data().each(function(group,i){if(last!==group){$(rows).eq(i).before('<tr class="group"><td colspan="5">'+group+'</td></tr>');last=group;}});}});$('#example tbody').on('click','tr.group',function(){var currentOrder=table.order()[0];if(currentOrder[0]===2&&currentOrder[1]==='asc'){table.order([2,'desc']).draw();}else{table.order([2,'asc']).draw();}});});});